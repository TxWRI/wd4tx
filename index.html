<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="An R interface to the Texas Water Development Board (TWDB) Water Data for Texas website &lt;https://www.waterdatafortexas.org&gt;.">
<title>Access TWDB Water Data For Texas • wd4tx</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="deps/_EB%20Garamond-0.4.0/font.css" rel="stylesheet">
<link href="deps/_JetBrains%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="deps/_Oswald-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Access TWDB Water Data For Texas">
<meta property="og:description" content="An R interface to the Texas Water Development Board (TWDB) Water Data for Texas website &lt;https://www.waterdatafortexas.org&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">wd4tx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/TxWRI/wd4tx/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="wd4tx">wd4tx<a class="anchor" aria-label="anchor" href="#wd4tx"></a>
</h1></div>
<!-- badges: start -->

<p><code>wd4tx</code> is an R interface for downloading data from the Texas Water Development Board’s (TWDB) Water Data For Texas data portal (<a href="https://www.waterdatafortexas.org" class="external-link uri">https://www.waterdatafortexas.org</a>). Core functions include:</p>
<ul>
<li>
<code><a href="reference/download_reservoir.html">download_reservoir()</a></code>: Absolute and relative water supply reservoir storage (for individual reservoirs and aggregated by planning area, municipality, river basin, and climate region)</li>
<li>
<code><a href="reference/download_well.html">download_well()</a></code>: Groundwater well levels</li>
<li>
<code><a href="reference/download_lep.html">download_lep()</a></code>: Precipitation and evaporation by quad</li>
<li>
<code><a href="reference/download_coastal_site_data.html">download_coastal_site_data()</a></code>: TWDB coastal water quality (primarily salinity and dissolved oxygen) data</li>
<li>
<code><a href="reference/download_coastal_hydrology.html">download_coastal_hydrology()</a></code>: TWDB freshwater inflow estimates for bays and estuaries</li>
</ul>
<p>This package is not affiliated with the TWDB. Any questions or issues should be directed to: <a href="https://github.com/TxWRI/wd4tx/issues" class="external-link uri">https://github.com/TxWRI/wd4tx/issues</a></p>
</div>
<div class="section level1">
<h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1>
<p><code>wd4tx</code> is not on CRAN. In order to install, use <code>devtools</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"TxWRI/wd4tx"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level1">
<h1 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h1>
<div class="section level2">
<h2 id="download-reservoir-storage-data">Download Reservoir Storage Data<a class="anchor" aria-label="anchor" href="#download-reservoir-storage-data"></a>
</h2>
<p>TWDB provides data for the percent storage, reservoir storage (acre-feet), conservation storage (acre-feet), and conservation capacity (acre-feet) for the water supply (and some flood control) reservoirs used by the state of Texas. The data is available for individual reservoirs, or aggregated by state planning area, river basin, municipal supply, and climate regions. See <a href="https://www.waterdatafortexas.org/reservoirs/statewide" class="external-link uri">https://www.waterdatafortexas.org/reservoirs/statewide</a> for more details.</p>
<div class="section level3">
<h3 id="download-individual-reservoir-storage-data">Download individual reservoir storage data<a class="anchor" aria-label="anchor" href="#download-individual-reservoir-storage-data"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/TxWRI/wd4tx" class="external-link">wd4tx</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>

<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_reservoir.html">download_reservoir</a></span><span class="op">(</span>reservoir <span class="op">=</span> <span class="st">"limestone"</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>,
         water_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">water_level</span><span class="op">)</span>,
         surface_area <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">surface_area</span><span class="op">)</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_area</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">date</span>, <span class="va">percent_full</span><span class="op">)</span>, 
            fill <span class="op">=</span> <span class="st">"dodgerblue"</span>,
            alpha <span class="op">=</span> <span class="fl">0.50</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent Full"</span>, x <span class="op">=</span> <span class="st">"Date"</span>,
       title <span class="op">=</span> <span class="st">"Lake Limestone"</span>,
       subtitle <span class="op">=</span> <span class="st">"Ratio of conservation storage to conservation capacity over time"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Source Sans Pro"</span>,
                base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example1-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="download-reservoir-storage-data-aggregated-by-municipality">Download reservoir storage data aggregated by municipality<a class="anchor" aria-label="anchor" href="#download-reservoir-storage-data-aggregated-by-municipality"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_reservoir.html">download_reservoir</a></span><span class="op">(</span>aggregate_by <span class="op">=</span> <span class="st">"municipal"</span>,
                         region_name <span class="op">=</span> <span class="st">"houston"</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_area</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">date</span>, <span class="va">percent_full</span><span class="op">)</span>, 
            fill <span class="op">=</span> <span class="st">"dodgerblue"</span>,
            alpha <span class="op">=</span> <span class="fl">0.50</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent Full"</span>, x <span class="op">=</span> <span class="st">"Date"</span>,
       title <span class="op">=</span> <span class="st">"Houston Reservoir Supply"</span>,
       subtitle <span class="op">=</span> <span class="st">"Ratio of conservation storage to conservation capacity over time"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Source Sans Pro"</span>,
                base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example2-1.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="download-individual-well-data">Download Individual Well Data<a class="anchor" aria-label="anchor" href="#download-individual-well-data"></a>
</h2>
<p>TWDB provides water level measurements from a statewide network of well level recorders. To download the information, all that is needed is the state well number. This information can be accessed with the <code><a href="reference/download_well_meta.html">download_well_meta()</a></code> function. This will provide a <code>sf</code> dataframe:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_well_meta.html">download_well_meta</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">df</span>
<span class="co">#&gt; Simple feature collection with 302 features and 6 fields</span>
<span class="co">#&gt; Geometry type: POINT</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: -106.6058 ymin: 26.04472 xmax: -94.07056 ymax: 36.24333</span>
<span class="co">#&gt; Geodetic CRS:  WGS 84</span>
<span class="co">#&gt; # A tibble: 302 x 7</span>
<span class="co">#&gt;    aquifer  aquifer_type county   entity                     status  well_number</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;                      &lt;chr&gt;   &lt;chr&gt;      </span>
<span class="co">#&gt;  1 Ogallala Unconfined   Dallam   Texas Water Development B~ Active  0260303    </span>
<span class="co">#&gt;  2 Ogallala Unconfined   Hansford Texas Water Development B~ Active  0354301    </span>
<span class="co">#&gt;  3 Ogallala Unconfined   Roberts  Panhandle GCD              Active  0503709    </span>
<span class="co">#&gt;  4 Ogallala Unconfined   Roberts  Texas Water Development B~ Active  0509553    </span>
<span class="co">#&gt;  5 Ogallala Unconfined   Roberts  Panhandle GCD              Active  0510953    </span>
<span class="co">#&gt;  6 Ogallala Unconfined   Roberts  Texas Water Development B~ Active  0517203    </span>
<span class="co">#&gt;  7 Ogallala Unconfined   Gray     Panhandle GCD              Active  0526501    </span>
<span class="co">#&gt;  8 Ogallala Unconfined   Wheeler  Panhandle GCD              Active  0529505    </span>
<span class="co">#&gt;  9 Ogallala Unconfined   Wheeler  Texas Water Development B~ Inacti~ 0529711    </span>
<span class="co">#&gt; 10 Other    Unconfined   Wheeler  Panhandle GCD              Active  0539904    </span>
<span class="co">#&gt; # ... with 292 more rows, and 1 more variable: geometry &lt;POINT [°]&gt;</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_sf</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">status</span>, fill <span class="op">=</span> <span class="va">status</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_void</span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Source Sans Pro"</span>,
             base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example4-1.png" width="100%"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_well.html">download_well</a></span><span class="op">(</span><span class="st">"6507905"</span><span class="op">)</span>

<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">mutate</span><span class="op">(</span>datetime <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">datetime</span><span class="op">)</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">datetime</span>, <span class="va">`water_level(ft below land surface)`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_reverse</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Water Level (ft below surface)"</span>,
       x <span class="op">=</span> <span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Source Sans Pro"</span>,
                base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example5-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="download-evaporation-and-precipitation-data">Download Evaporation and Precipitation Data<a class="anchor" aria-label="anchor" href="#download-evaporation-and-precipitation-data"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_lep.html">download_lep</a></span><span class="op">(</span>quad <span class="op">=</span> <span class="st">"710"</span>, 
                   start_date <span class="op">=</span> <span class="st">"2010-01"</span>,
                   end_date <span class="op">=</span> <span class="st">"2018-12"</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="va">period</span>,
               names_to <span class="op">=</span> <span class="st">"label"</span>,
               values_to <span class="op">=</span> <span class="st">"inches"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">mutate</span><span class="op">(</span>period <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu">ymd</span><span class="op">(</span><span class="va">period</span>, truncated <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">period</span>, <span class="va">inches</span>, color <span class="op">=</span> <span class="va">label</span>, linetype <span class="op">=</span> <span class="va">label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_minimal</span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Source Sans Pro"</span>,
                base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>,
        legend.direction <span class="op">=</span> <span class="st">"horizontal"</span>,
        legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example6-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="download-coastal-freshwater-inflow-data">Download Coastal Freshwater Inflow Data<a class="anchor" aria-label="anchor" href="#download-coastal-freshwater-inflow-data"></a>
</h2>
<p>Estimated freshwater inflows and inflow balances for Texas estuaries are provided to support environmental and water planning studies. Details are here: <a href="https://www.waterdatafortexas.org/coastal/hydrology" class="external-link uri">https://www.waterdatafortexas.org/coastal/hydrology</a></p>
<p>A <code>geoid</code> argument is required to identify the watershed data is requested for. Use <code><a href="reference/download_coastal_geometry.html">download_coastal_geometry()</a></code> to download <code>sf</code> files which include the name, location, and id.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_coastal_geometry.html">download_coastal_geometry</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"watershed"</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt; Simple feature collection with 10 features and 4 fields</span>
<span class="co">#&gt; Geometry type: MULTIPOLYGON</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: -98.91209 ymin: 25.8544 xmax: -93.5491 ymax: 30.75851</span>
<span class="co">#&gt; Geodetic CRS:  WGS 84</span>
<span class="co">#&gt; # A tibble: 10 x 5</span>
<span class="co">#&gt;    type    name   extradata$displa~ $watershed    id                    geometry</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;             &lt;chr&gt;      &lt;int&gt;          &lt;MULTIPOLYGON [°]&gt;</span>
<span class="co">#&gt;  1 Feature sabine Sabine Lake       sabine       689 (((-94.02172 30.37507, -94~</span>
<span class="co">#&gt;  2 Feature brazo~ Brazos River Est~ brazos_ri~   691 (((-95.53541 30.71278, -95~</span>
<span class="co">#&gt;  3 Feature galve~ Galveston Bay     galveston    690 (((-95.53244 29.20769, -95~</span>
<span class="co">#&gt;  4 Feature matag~ Matagorda Bay     matagorda    694 (((-95.98934 29.30877, -95~</span>
<span class="co">#&gt;  5 Feature san_b~ San Bernard Rive~ san_berna~   692 (((-95.61194 28.77265, -95~</span>
<span class="co">#&gt;  6 Feature east_~ East Matagorda B~ east_mata~   693 (((-97.13136 29.64648, -97~</span>
<span class="co">#&gt;  7 Feature arans~ Aransas Bay       aransas      695 (((-97.5819 27.94688, -97.~</span>
<span class="co">#&gt;  8 Feature corpu~ Corpus Christi B~ corpus_ch~   696 (((-97.82122 28.2044, -97.~</span>
<span class="co">#&gt;  9 Feature lagun~ Laguna Madre Est~ laguna_ma~   697 (((-97.54611 27.65115, -97~</span>
<span class="co">#&gt; 10 Feature san_a~ San Antonio Bay   san_anton~   698 (((-96.83909 28.177, -96.8~</span></code></pre></div>
<p>Valid type arguments include <code>c(basin", "bay", "estuary", "sub_watershed", "watershed")</code>. Some types return simple features with topological errors. An example of one way to deal with this is shown below:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fl">3081</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_simplify</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_sf</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_sf_text</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>label <span class="op">=</span> <span class="va">id</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme_void</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example8-1.png" width="100%"></p>
<p>With a valid id number, <code><a href="reference/download_coastal_hydrology.html">download_coastal_hydrology()</a></code> can be used to download freshwater inflow data for the specified feature.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_coastal_hydrology.html">download_coastal_hydrology</a></span><span class="op">(</span>geoid <span class="op">=</span> <span class="st">"689"</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">mutate</span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>

<span class="fu">ggplot</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span><span class="va">date</span>, <span class="va">fresh_in</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme_minimal</span><span class="op">(</span>base_family <span class="op">=</span> <span class="st">"Source Sans Pro"</span>,
                base_size <span class="op">=</span> <span class="fl">9</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Date"</span>, y <span class="op">=</span> <span class="st">"Volume (acre-ft)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>,
        legend.direction <span class="op">=</span> <span class="st">"horizontal"</span>,
        legend.title <span class="op">=</span> <span class="fu">element_blank</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-example9-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="download-coastal-water-quality-data">Download Coastal Water Quality Data<a class="anchor" aria-label="anchor" href="#download-coastal-water-quality-data"></a>
</h2>
<p>A list of sites is available with the <code><a href="reference/download_coastal_sites.html">download_coastal_sites()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_coastal_sites.html">download_coastal_sites</a></span><span class="op">(</span>all_stations <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt; # A tibble: 137 x 14</span>
<span class="co">#&gt;       id station_code name    description   stationstatus$id $name $description </span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;                    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;        </span>
<span class="co">#&gt;  1   208 6980         &lt;a hre~ "East Bay @ ~                1 live  Station is r~</span>
<span class="co">#&gt;  2   202 6984         &lt;a hre~ "West Bay @ ~                1 live  Station is r~</span>
<span class="co">#&gt;  3   205 6985         &lt;a hre~ "West Bay @ ~                1 live  Station is r~</span>
<span class="co">#&gt;  4   206 6990         &lt;a hre~ "West Bay @ ~                1 live  Station is r~</span>
<span class="co">#&gt;  5   204 6996         &lt;a hre~ "Mad Island ~                1 live  Station is r~</span>
<span class="co">#&gt;  6    65 ARA          Mid Ar~ "Aransas Bay~                3 reti~ Station is r~</span>
<span class="co">#&gt;  7   258 ARA_1        ARA_1   "Port Aransa~                4 temp~ Station was ~</span>
<span class="co">#&gt;  8   259 ARA_2        ARA_2   "Lydia Ann C~                4 temp~ Station was ~</span>
<span class="co">#&gt;  9   260 ARA_3        ARA_3   "Corpus Chri~                4 temp~ Station was ~</span>
<span class="co">#&gt; 10   261 ARA_4        ARA_4   "GIWW nr Cov~                4 temp~ Station was ~</span>
<span class="co">#&gt; # ... with 127 more rows, and 9 more variables: agency &lt;df[,3]&gt;,</span>
<span class="co">#&gt; #   coordinates &lt;list&gt;, estuary &lt;chr&gt;, bay &lt;chr&gt;, status_id &lt;int&gt;,</span>
<span class="co">#&gt; #   the_geom &lt;df[,2]&gt;, basin &lt;chr&gt;, max_date &lt;chr&gt;, min_date &lt;chr&gt;</span></code></pre></div>
<p>A list of parameters measured at that station are available using <code><a href="reference/download_coastal_site_parameters.html">download_coastal_site_parameters()</a></code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_coastal_site_parameters.html">download_coastal_site_parameters</a></span><span class="op">(</span><span class="st">"SAB2"</span><span class="op">)</span>
<span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="va">units_name</span>, <span class="va">code</span>, <span class="va">name</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 9 x 3</span>
<span class="co">#&gt;   units_name    code                                      name                  </span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;                                     &lt;chr&gt;                 </span>
<span class="co">#&gt; 1 PSU           seawater_salinity                         Salinity              </span>
<span class="co">#&gt; 2 m             water_depth_nonvented                     Water Depth  - vertic~</span>
<span class="co">#&gt; 3 mgl           water_dissolved_oxygen_concentration      Dissolved Oxygen Conc~</span>
<span class="co">#&gt; 4 v             instrument_battery_voltage                Battery Voltage       </span>
<span class="co">#&gt; 5 mS/cm         water_electrical_conductivity             Electrical Conductivi~</span>
<span class="co">#&gt; 6 mS/cm         water_specific_conductance                Specific Conductance ~</span>
<span class="co">#&gt; 7 C             water_temperature                         Water Temperature     </span>
<span class="co">#&gt; 8 %             water_dissolved_oxygen_percent_saturation Dissolved Oxygen Satu~</span>
<span class="co">#&gt; 9 dimensionless water_ph                                  pH Level</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/download_coastal_site_data.html">download_coastal_site_data</a></span><span class="op">(</span>station <span class="op">=</span> <span class="st">"SAB2"</span>,
                                 parameter <span class="op">=</span> <span class="st">"seawater_salinity"</span>,
                                 start_date <span class="op">=</span> <span class="st">"2010-01-01"</span>,
                                 end_date <span class="op">=</span> <span class="st">"2018-01-01"</span>,
                                 bin <span class="op">=</span> <span class="st">"hour"</span><span class="op">)</span>
<span class="va">df</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="fu">mutate</span><span class="op">(</span>datetime_utc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="va">datetime_utc</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 60,447 x 2</span>
<span class="co">#&gt;    value datetime_utc       </span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;dttm&gt;             </span>
<span class="co">#&gt;  1 8.85  2010-01-01 00:00:00</span>
<span class="co">#&gt;  2 7.21  2010-01-01 00:00:00</span>
<span class="co">#&gt;  3 6.31  2010-01-01 00:00:00</span>
<span class="co">#&gt;  4 4.81  2010-01-01 00:00:00</span>
<span class="co">#&gt;  5 3.53  2010-01-01 00:00:00</span>
<span class="co">#&gt;  6 2.38  2010-01-01 00:00:00</span>
<span class="co">#&gt;  7 1.85  2010-01-01 00:00:00</span>
<span class="co">#&gt;  8 1.04  2010-01-01 00:00:00</span>
<span class="co">#&gt;  9 0.96  2010-01-01 00:00:00</span>
<span class="co">#&gt; 10 0.879 2010-01-01 00:00:00</span>
<span class="co">#&gt; # ... with 60,437 more rows</span></code></pre></div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/TxWRI/wd4tx/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/TxWRI/wd4tx/isssues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing wd4tx</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/mps9506" class="external-link">Michael Schramm</a> <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://github.com/TxWRI/wd4tx/actions/workflows/check-standard.yaml" class="external-link"><img src="https://github.com/TxWRI/wd4tx/actions/workflows/check-standard.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://choosealicense.com/" class="external-link"><img src="https://img.shields.io/badge/license-MIT%20+%20file%20LICENSE-lightgrey.svg" alt="license"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/mps9506" class="external-link">Michael Schramm</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
